<!DOCTYPE html>
<html>
<head>
  <title>Entry 2 | Door</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="door-new">

  <div class="top-nav hidden" id="topNav">
    <a href="../Homepage/index.html">Home</a>
    <a href="../entry-1/index.html">Coffee</a>
    <a href="../entry-2/index.html">Subway</a>
    <a href="../entry-3/index.html">Window</a>
    <a href="../entry-4/index.html">Night</a>
    <a href="../entry-5/index.html">SmallProofs</a>
    <a href="../entry-6/index.html">Reflection</a>
    <a href="../entry-7/index.html">Sky</a>
    <a href="../entry-8/index.html">Entry8</a>
    <a href="../entry-9/index.html">Me</a>
    <a href="../entry-10/index.html">Dream</a>
  </div>


  <!-- FIRST SCREEN -->
  <section class="slide-panel" id="slidePanel">

    <img 
      src="https://i.pinimg.com/1200x/2a/ca/a8/2acaa80a2f3e1fdf50b8887108d46b10.jpg"
      class="slide-image"
      id="slideImage"
    >

    <div class="intro-text" id="introText">
      <p>
        The door moves aside slowly—  
        not pushed, not forced,  
        but shifted just enough for me to enter  
        a softer version of myself.  

        I’ve crossed so many thresholds  
        without giving them names.  
        But this one feels intentional—  
        an opening I am finally ready to walk through.  

        As the image slides away,  
        it leaves space for my quiet reflection,  
        and suddenly the world  
        feels a little wider than before.
      </p>
    </div>

    <div class="drag-hint">swipe left</div>

  </section>



  <!-- SECOND SCREEN (NO REPEATED DOOR SECTION) -->
  <section class="content-panel">

    <div class="entry-container">

      <div class="block">
        <img src="https://i.pinimg.com/736x/29/c4/b1/29c4b14938ad2e1c6d55982a90dbc617.jpg" class="block-img">
        <div class="block-text">
          <h2>Map</h2>
          <p>
            A map unfolds, full of lines and marks tracing journeys yet to come.  
            Each route is a quiet invitation—a promise of footsteps not yet taken.
          </p>
        </div>
      </div>

      <div class="block reverse">
        <img src="https://i.pinimg.com/1200x/75/99/d3/7599d3d91246228a28fe21297918ab40.jpg" class="block-img">
        <div class="block-text">
          <h2>Earphone</h2>
          <p>
            Sound reshapes the air around me.  
            A melody becomes a path inward—  
            a space where memory softens  
            and the world feels briefly familiar.
          </p>
        </div>
      </div>

    </div>

  </section>

<script>
/* ---- FIXED INTERACTION SCRIPT ---- */

const img = document.getElementById("slideImage");
const introText = document.getElementById("introText");
const topNav = document.getElementById("topNav");

let startX = 0;
let dragging = false;

/* START DRAG */
img.addEventListener("mousedown", e => {
  dragging = true;
  startX = e.clientX;
});

document.addEventListener("mouseup", () => dragging = false);

document.addEventListener("mousemove", e => {
  if (!dragging) return;
  const diff = e.clientX - startX;

  if (diff < 0) img.style.transform = `translateX(${diff}px)`;

  if (diff < -180) finishSlide();
});

/* TOUCH */
img.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

img.addEventListener("touchmove", e => {
  const diff = e.touches[0].clientX - startX;

  if (diff < 0) img.style.transform = `translateX(${diff}px)`;

  if (diff < -180) finishSlide();
});

/* OPENING COMPLETE */
function finishSlide() {
  img.style.transition = "transform 0.6s ease-out";
  img.style.transform = "translateX(-120%)";

  introText.style.opacity = 1;

  setTimeout(() => {
    topNav.style.opacity = 1;
    topNav.style.pointerEvents = "auto";
  }, 600);

  dragging = false;
}
</script>

</body>
</html>